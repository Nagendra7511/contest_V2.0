<div class="row justify-content-center" *ngIf="private_hide || public_hide">

  <div class="col-lg-4 col-md-4 just ">

    <div class="form-group input-group">

      <div class="input-group-prepend">
        <span class="input-group-text"> <i class="fa fa-search"></i> </span>
      </div>
      <input type="text" class="form-control" placeholder="Search" [(ngModel)]="searchTerm" (keyup)="filterContests()">

    </div>
  </div>

</div>


<div *ngIf="!loading">
  <div class=" pb-4" *ngIf="private_hide">

    <div class="col-lg-12 pl-0 pb-3">
      <h4>Assigned to me</h4>
    </div>
    <div class="row" *ngIf="contestsPrivate.length > 0">
      <div class="col-md-4 mb-4" *ngFor="let item of contestsPrivate">
        <div class="contest-game pointer" (click)="navigateToContest(item)">
          <div class="img-box">
            <div class="game-banner">
              <img [src]="item.background_image || 'images/logo.png'" alt="{{ item.name }}">
            </div>

            <!-- <div class="game-logo">
            <img [src]="item.background_image" alt="{{ item.name }}" />
          </div> -->
            <div class="play-btn">
              <div class="play-icon">
                <a>
                  <div class="play-label">
                    <img src="images/play-icon.png" alt="Play" width="16px"> Play
                  </div>
                </a>
              </div>
              <!-- <div *ngIf="item.has_played" class="play-icon">
              <div class="played-label">Played</div>
            </div> -->
            </div>

            <div class="leaderboard" data-toggle="modal" data-target="#leaderboardModal"
              (click)="getLeaderBoard(item.contest_id)">
              <svg xmlns="http://www.w3.org/2000/svg" height="24px" viewBox="0 -960 960 960" width="24px"
                fill="#5f6368">
                <path
                  d="M480-517q37 0 62.5-25.5T568-605q0-37-25.5-62.5T480-693q-37 0-62.5 25.5T392-605q0 37 25.5 62.5T480-517ZM298-120v-60h152v-148q-54-11-96-46.5T296-463q-74-8-125-60t-51-125v-44q0-25 17.5-42.5T180-752h104v-88h392v88h104q25 0 42.5 17.5T840-692v44q0 73-51 125t-125 60q-16 53-58 88.5T510-328v148h152v60H298Zm-14-406v-166H180v44q0 45 29.5 78.5T284-526Zm196 141q57 0 96.5-40t39.5-97v-258H344v258q0 57 39.5 97t96.5 40Zm196-141q45-10 74.5-43.5T780-648v-44H676v166Zm-196-57Z" />
              </svg>
            </div>

          </div>
          <div class="game-info pointer">
             <div class="subTitle">
              <h3 class="Doted-text">{{ item.contest_name }}</h3>
              <div class="insta-icon" *ngIf="item.insta_post">
                <img src="images/insta.png" alt="Instagram">
              </div>
            </div>
            
            <p class="m-0"><span class="daysLeft">{{ item.daysLeft }} Day(s) left</span><span
                class="store_name">{{ item.stores?.name }}</span></p>
          </div>
        </div>
      </div>
    </div>
    <p class="col-md-12" *ngIf="message1">{{ message1 }}</p>
    <div *ngIf="no_pravite_contests" class="pagination justify-content-center">
      <button (click)="previousPagePrivate()" [disabled]="currentPagePrivate === 1">Previous</button>
      <span>Page {{ currentPagePrivate }} of {{ totalPagesPrivate }}</span>
      <button (click)="nextPagePrivate()" [disabled]="currentPagePrivate === totalPagesPrivate">Next</button>
    </div>
  </div>
  <div *ngIf="!private_hide && !public_hide && !brand_hide" class="col-md-12 text-center mb-5 mt-5">
    <p class="col-md-12 text-center mb-5 mt-5">No Contests Avaliable</p>
  </div>

</div>
<div *ngIf="!loading">
  <div class="pt-4 " *ngIf="public_hide">
    <div class="col-lg-12 pl-0
     pb-3">
      <h4>Active Contests</h4>
    </div>
    <div class=" row" *ngIf="contestsPublic.length > 0">
      <div class="col-md-4 mb-4" *ngFor="let item of contestsPublic">
        <div class="contest-game pointer" (click)="onPlayClick(item)">
          <div class="img-box">
            <div class="game-banner">
              <img [src]="item.background_image || 'images/logo.png'" alt="{{ item.name }}">
            </div>
            <div class="play-btn">
              <div class="play-icon">
                <a>
                  <div class="play-label">
                    <img src="images/play-icon.png" alt="Play" width="16px"> Play
                  </div>
                </a>
              </div>
              <!-- <div *ngIf="item.has_played" class="play-icon">
                  <span class="played-label">Played</span>
                </div> -->
            </div>

            <div class="leaderboard" data-toggle="modal" data-target="#leaderboardModal"
              (click)="getLeaderBoard(item.contest_id)">
              <svg xmlns="http://www.w3.org/2000/svg" height="24px" viewBox="0 -960 960 960" width="24px"
                fill="#5f6368">
                <path
                  d="M480-517q37 0 62.5-25.5T568-605q0-37-25.5-62.5T480-693q-37 0-62.5 25.5T392-605q0 37 25.5 62.5T480-517ZM298-120v-60h152v-148q-54-11-96-46.5T296-463q-74-8-125-60t-51-125v-44q0-25 17.5-42.5T180-752h104v-88h392v88h104q25 0 42.5 17.5T840-692v44q0 73-51 125t-125 60q-16 53-58 88.5T510-328v148h152v60H298Zm-14-406v-166H180v44q0 45 29.5 78.5T284-526Zm196 141q57 0 96.5-40t39.5-97v-258H344v258q0 57 39.5 97t96.5 40Zm196-141q45-10 74.5-43.5T780-648v-44H676v166Zm-196-57Z" />
              </svg>
            </div>

          </div>
          <div class="game-info pointer">
           <div class="subTitle">
              <h3 class="Doted-text">{{ item.contest_name }}</h3>
              <div class="insta-icon" *ngIf="item.insta_post">
                <img src="images/insta.png" alt="Instagram">
              </div>
            </div>
            
            <p class="m-0"><span class="daysLeft">{{ item.daysLeft }} Day(s) left</span><span
                class="store_name">{{ item.stores?.name }}</span></p>

          </div>
        </div>
      </div>
    </div>
    <p class="col-md-12" *ngIf="message">{{ message }}</p>
    <!-- <div *ngIf="no_public_contests" class="pagination justify-content-center">
    <button (click)="previousPagePublic()" [disabled]="currentPagePublic === 1">Previous</button>
    <span>Page {{ currentPagePublic }} of {{ totalPagesPublic }}</span>
    <button (click)="nextPagePublic()" [disabled]="currentPagePublic === totalPagesPublic">Next</button>
  </div> -->
  </div>


  <div *ngIf="brand_hide">
    <div class="col-12 p-0">
      <div class="welcome-text-admin">
        <p class="m-0">This is preview mode for brands to test the contests before publishing, your results will
          not be recorded.</p>
      </div>
    </div>
    <div class="col-lg-12 pl-0 pb-3">
      <h4>Brand Contests</h4>
    </div>
    <div class="row" *ngIf="contestsBrand.length">
      <div class="col-md-4 mb-4" *ngFor="let item of contestsBrand">
        <div class="contest-game pointer" (click)="onPlayClick(item)">
          <div class="img-box">
            <div class="game-banner">
              <img [src]="item.background_image || 'images/logo.png'" alt="{{ item.name }}">
            </div>
            <div class="play-btn">
              <div class="play-icon">
                <a>
                  <div class="play-label">
                    <img src="images/play-icon.png" alt="Play" width="16px"> Play
                  </div>
                </a>
              </div>
              <!-- <div *ngIf="item.has_played" class="play-icon">
                  <span class="played-label">Played</span>
                </div> -->
            </div>

            <div class="leaderboard" data-toggle="modal" data-target="#leaderboardModal"
              (click)="getLeaderBoard(item.id)">
              <svg xmlns="http://www.w3.org/2000/svg" height="24px" viewBox="0 -960 960 960" width="24px"
                fill="#5f6368">
                <path
                  d="M480-517q37 0 62.5-25.5T568-605q0-37-25.5-62.5T480-693q-37 0-62.5 25.5T392-605q0 37 25.5 62.5T480-517ZM298-120v-60h152v-148q-54-11-96-46.5T296-463q-74-8-125-60t-51-125v-44q0-25 17.5-42.5T180-752h104v-88h392v88h104q25 0 42.5 17.5T840-692v44q0 73-51 125t-125 60q-16 53-58 88.5T510-328v148h152v60H298Zm-14-406v-166H180v44q0 45 29.5 78.5T284-526Zm196 141q57 0 96.5-40t39.5-97v-258H344v258q0 57 39.5 97t96.5 40Zm196-141q45-10 74.5-43.5T780-648v-44H676v166Zm-196-57Z" />
              </svg>
            </div>

          </div>
          <div class="game-info pointer">
            <div class="subTitle">
              <h3 class="Doted-text">{{ item.name }}</h3>
              <div class="insta-icon" *ngIf="item.insta_post">
                <img src="images/insta.png" alt="Instagram">
              </div>
            </div>
            
            <p class="m-0"><span class="daysLeft">{{ item.daysLeft }} Day(s) left</span><span
                class="store_name">{{ item.stores?.name }}</span></p>

          </div>
        </div>
      </div>
    </div>
  </div>




</div>


<!-- Modal -->
<div class="modal fade" id="leaderboardModal" tabindex="-1" role="dialog" aria-labelledby="leaderboardModalLabel"
  aria-hidden="true">
  <div class="modal-dialog modal-dialog-centered" role="document">
    <div class="modal-content">
      <div class="modal-header">
        <h5 class="modal-title" id="leaderboardModalLabel">Leaderboard</h5>
        <button type="button" class="close" data-dismiss="modal" aria-label="Close">
          <span aria-hidden="true">&times;</span>
        </button>
      </div>
      <div class="modal-body">
        <table class="w-100 table table-striped" *ngIf="!loading && leaderBoardList.length > 0">
          <tbody>
            <tr *ngFor="let item of leaderBoardList">
              <td width="70">{{ item.first_name ?? item.insta_username }}</td>
              <td width="30" class="text-center"> {{item.score}}</td>
            </tr>
          </tbody>
        </table>
        <p *ngIf="notificationMessage" class="leaderBoard-notification">{{ notificationMessage }}</p>
        <!-- <p class="m-0 text-center" *ngIf="!loading && messageError">{{ messageError }}</p> -->
      </div>

    </div>
  </div>
</div>

<div class="backdrop" *ngIf="loading">
  <div class="loader"></div>
</div>